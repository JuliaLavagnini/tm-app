{% extends "base.html" %} {% block content %}

<div class="container-1">
  <h1 id="greeting"></h1>
  <div class="row boxes">
    <div class="col s6 z-depth-2">
      <p>Total Upgoing Tasks</p>
      <p>{{ tasks|selectattr('task_name')|list|length }}</p>
    </div>
    <div class="col s6 z-depth-2">
      <p>High Priority Tasks</p>
      <p>{{ tasks|selectattr('priority','equalto','High')|list|length }}</p>
    </div>
  </div>
  <div class="row">
    <form action="{{ url_for('search') }}" method="post" class="col s12">
      <div class="row valign-wrapper center-align">
        <div class="input-field col s12 m8">
          <input
            type="text"
            name="query"
            id="query"
            minlength="3"
            class="validate"
            required
          />
          <label for="query">Search Tasks</label>
        </div>
        <div class="col s12 m4">
          <a
            href="{{ url_for('show_tasks') }}"
            class="btn"
            style="background-color: #ff925c; color: #1d1e18"
            >Reset</a
          >
          <button
            type="submit"
            class="btn"
            style="background-color: #ff925c; color: #1d1e18"
          >
            Search
          </button>
        </div>
      </div>
    </form>
  </div>
  <h2>Upcoming Tasks</h2>
  <table>
    <thead>
      <tr>
        <th>Task</th>
        <th>Description</th>
        <th>Due</th>
        <th>Team Resposible</th>
        <th>Priority</th>
        <th>Assigned by</th>
      </tr>
    </thead>
    <tbody>
      {% for task in tasks %}
      <tr>
        <td>{{ task.task_name }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.due }}</td>
        <td>{{ task.team_name }}</td>
        <td>{{ task.priority }}</td>
        <td>{{ task.created_by }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <h2>Completed Tasks</h2>
  <table>
    <thead>
      <tr>
        <th>Task Name</th>
        <th>Description</th>
        <th>Team Resposible</th>
        <th>Assigned by</th>
      </tr>
    </thead>
    <tbody>
      {% for task in done_tasks %}
      <tr>
        <td>{{ task.task_name }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.team_name}}</td>
        <td>{{ task.created_by}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
